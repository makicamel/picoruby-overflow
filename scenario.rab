= å…¥é–€ä»¥å‰ã‹ã‚‰å§‹ã‚ã‚‹\nPicoRuby ã®ã‚ãã³æ–¹

: author
   @makicamel

: content-source
   PicoRuby Overflowä¼šè­°

:date
   2025.07.19

:theme
   theme

= è‡ªå·±ç´¹ä»‹

  * @makicamel / å·åŸä¸‡å­£
  * Ruby ğŸ’ ã¨ãƒ“ãƒ¼ãƒ« ğŸ» ã¨ãŠé…’ãŒå¥½ã
  * å¥½ããªè¨€è‘‰ã¯ã€Œã‚¨ã‚¤ã£ã¦ã‚„ã£ã¦ãƒãƒ¼ãƒ³ã€
  * PicoPicoRubyå§‹ã‚ã¾ã—ãŸ ((<URL:https://picopicoruby.connpass.com/>))
     * PicoRubyãƒ»é›»å­å·¥ä½œæ­´ 1 ãƒ¶æœˆ
     * ãƒ”ã‚«ãƒ”ã‚«ã®åˆå¿ƒè€…

  # image
  # src = image/makicamel.png
  # relative_width = 10
  # align = right
  # vertical_align = top
  # relative_margin_right = 0
  # relative_margin_top = 0

= è‡ªå·±ç´¹ä»‹

* é›»è»Šã§Ruby! ã‚³ãƒ¼ãƒŠãƒ¼ã‚ã‚Šã¾ã™ ğŸšƒ
  * PicoRuby ã§æ“ä½œã§ãã‚‹ãƒ—ãƒ©ãƒ¬ãƒ¼ãƒ«
  * éŠã‚“ã§ã„ã£ã¦ãã ã•ã„

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/prarail-demo.png
: background-image-relative-height
   72
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   12
: background-image-relative-margin-left
   20

= RubyKaigi 2025 Lightning Talk

\n\n\n\n\n\n\n\n\n\n
(('tag:xx-small:ã€€ã€€Road to RubyKaigi: Making Tinny Chiptunes with Rubyã€€'))((<URL:https://rubykaigi.org/2025/presentations/lt/>))
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/rubykaigi-lt1.png
: background-image-relative-height
   76
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= RubyKaigi 2025 Lightning Talk

* Road to RubyKaigi
  * Rubyist ã«ã‚ˆã‚‹ Rubyist ã®ãŸã‚ã® Ruby è£½ã®ã‚²ãƒ¼ãƒ 
  * ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§éŠã¶æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ 
  * ãƒã‚°ã‚’å€’ã—ã€†åˆ‡ã‹ã‚‰é€ƒã‚Œã¦ RubyKaigi å‚åŠ ã‚’ç›®æŒ‡ã™

\n\n\n
(('tag:xx-small:ã€€ã€€Road to RubyKaigi: Making Tinny Chiptunes with Rubyã€€'))((<URL:https://rubykaigi.org/2025/presentations/lt/>))\n
(('tag:xx-small:ã€€ã€€Road to RubyKaigiã€€'))((<URL:https://github.com/makicamel/road_to_rubykaigi>))

= RubyKaigi 2025 Lightning Talk

* Ruby ã§éŸ³ã‚’ä½œã£ã¦é³´ã‚‰ã™ãŠè©±ã‚’ã—ãŸ ğŸ”ˆ
  * éŸ³ã¯æ³¢ ğŸŒŠ
  * æ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã‚’ã¤ãã£ã¦\nã‚ªãƒ¼ãƒ‡ã‚£ã‚ª API ã«æ¸¡ã™ã¨\néŸ³ãŒé³´ã‚‰ã›ã‚‹

\n\n\n\n
(('tag:xx-small:ã€€ã€€Road to RubyKaigi: Making Tinny Chiptunes with Rubyã€€'))((<URL:https://rubykaigi.org/2025/presentations/lt/>))\n
(('tag:xx-small:ã€€ã€€Road to RubyKaigiã€€'))((<URL:https://github.com/makicamel/road_to_rubykaigi>))

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/rubykaigi-lt2.png
: background-image-relative-height
   76
: background-image-align
   right
: background-image-vertical-align
   middle
: background-image-relative-margin-left
   18
: background-image-relative-margin-top
   16

= Road to RubyKaigi

  * ãƒ‡ãƒ¢

  # image
  # src = image/play-video.gif
  # relative_height = 100
  # align = center
  # vertical_align = middle

(('tag:xx-small:ã€€ã€€Road to RubyKaigiã€€'))((<URL:https://github.com/makicamel/road_to_rubykaigi>))

= Road to RubyKaigi
ã€€
  # image
  # src = image/fukidashi-game.png
  # relative_width = 28
  # align = right
  # vertical_align = bottom
  # relative_margin_top = 12

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/makicamel.png
: background-image-relative-width
   8
: background-image-align
   right
: background-image-vertical-align
   bottom
: background-image-relative-margin-right
   4

= PicoRuby

  # image
  # src = image/picoruby-github.png
  # relative_width = 70
  # align = center
  # vertical_align = middle
  # relative_margin_top = 1

(('tag:xx-small:ã€€ã€€PicoRubyã€€'))((<URL:https://github.com/picoruby/picoruby>))

= PicoRuby

  * è»½é‡ Ruby å®Ÿè£…
    * ãƒã‚¤ã‚³ãƒ³ã§å‹•ä½œã™ã‚‹
  * @hasumikin ã•ã‚“ä½œ

  # image
  # src = image/fukidashi-game2.png
  # relative_width = 28
  # align = right
  # vertical_align = bottom
  # relative_margin_top = 12

\n\n\n\n\n\n
(('tag:xx-small:ã€€PicoRubyã€€'))((<URL:https://github.com/picoruby/picoruby>))

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/makicamel.png
: background-image-relative-width
   8
: background-image-align
   right
: background-image-vertical-align
   bottom
: background-image-relative-margin-right
   4

= ã€€
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/newbie1.png
: background-image-relative-width
   100

= ã€€
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/newbie2.png
: background-image-relative-width
   100

= é›»å­å·¥ä½œæœªçµŒé¨“
ã€€
  # image
  # src = image/fukidashi-questions.png
  # relative_width = 88
  # vertical_align = top
  # relative_margin_top = -10

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/makicamel.png
: background-image-relative-width
   8
: background-image-align
   right
: background-image-vertical-align
   bottom
: background-image-relative-margin-right
   4

= é›»å­å·¥ä½œæœªçµŒé¨“

  * ã‚´ãƒ¼ãƒ«ã¾ã§ã®é“ç­‹ãŒè¦‹ãˆãªã„
    * ä½•ã‚’ã©ã†ã—ãŸã‚‰éŸ³ãŒé³´ã‚‹ã‚“ã§ã™ï¼Ÿ
  * å¸¸è­˜ãŒãªã„
    * ã¨ã‚Šã‚ãˆãšå¼·ã„é›»åœ§ã‹ã‘ãŸã‚‰ã„ã„ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ï¼Ÿ(ï½¡âˆ€ã‚œ)
  * çŸ¥ã‚‰ãªã„å˜èªãƒ»æ¦‚å¿µãŒã¨ã«ã‹ãå¤šã„
    * ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã€ãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆã€GPIOã€å…¥å‡ºåŠ›ãƒ”ãƒ³...

= é›»å­å·¥ä½œæœªçµŒé¨“

  * ...ã¨ã„ã†ã²ã¨ãŒéŸ³ã®é³´ã‚‹å°ã•ãªãƒ‡ãƒã‚¤ã‚¹ã‚’ã¤ãã£ãŸè©±ã‚’ã—ã¾ã™
  * ãƒˆãƒ¼ã‚¯ã®ã‚´ãƒ¼ãƒ«
    * åˆå¿ƒè€…: é›»å­å·¥ä½œæ¦‚è¦³ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‹ã‚‹
    * ãƒ™ãƒ†ãƒ©ãƒ³: ã€Œåˆå¿ƒè€…ã¯ã“ã‚“ãªã“ã¨ãŒã‚ã‹ã‚‰ãªã„ã‚“ã ã€ã¨ã„ã†æ°—ã¥ã

= ã¤ãã£ã¦ã¿ã‚ˆã†

  * Road to RubyKaigi ã®éŸ³ã‚’é³´ã‚‰ã™ã ã‘ã®ãƒ‡ãƒã‚¤ã‚¹
    * ã‚²ãƒ¼ãƒ ä¸¸ã”ã¨ä½œã‚‹ã®ã¯ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦å¤§ãã™ãã‚‹
    * æ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã¯å‰ã«ä½œã£ãŸã®ã§ã§ããã†ãªæ°—ãŒã™ã‚‹
    * éŸ³ã‚’é³´ã‚‰ã™ã¨æ¥½ã—ã„

= ç›®æ¬¡

  (1) æ¦‚è¦³ã‚’çœºã‚ã‚‹
  (2) PicoRuby ã®ã‚ãã³æ–¹
  (3) åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

= ç›®æ¬¡

  (1) ((*æ¦‚è¦³ã‚’çœºã‚ã‚‹*))
  (2) PicoRuby ã®ã‚ãã³æ–¹
  (3) åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

= æ¦‚è¦³å›³
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pcb0.png
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= æ¦‚è¦³å›³ 1. é›»æ± 
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pcb1.png
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= æ¦‚è¦³å›³ 1. é›»æ± 

  * é›»åœ§ 3V
    * Raspberry Pi Pico ã®èµ·å‹•ã«ã¯ç´„ 3V å¿…è¦
  * å˜ä¸‰é›»æ± ã¯ã ã„ãŸã„ 1 æœ¬ 1.5V
    * 2 æœ¬ç›´åˆ—ã§ã¤ãªã„ã ã‚‰ 3V
  * ä»Šå›ã¯ãƒªãƒã‚¦ãƒ é›»æ± ã‚’ä½¿ç”¨
    * å°ã•ã„åŸºç›¤ã«ä¹—ã›ãŸã‹ã£ãŸã®ã§

= æ¦‚è¦³å›³ 2. ã‚¹ã‚¤ãƒƒãƒ
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pcb2.png
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= æ¦‚è¦³å›³ 2. ã‚¹ã‚¤ãƒƒãƒ

  * å›è·¯ã®é–‹é–‰ã‚’ã™ã‚‹
    * é–‰ã˜ã¦ã„ã‚‹ã¨å›è·¯ãŒã¤ãªãŒã£ã¦ã„ã‚‹
      * Raspberry Pi Pico ã«é›»æºãŒä¾›çµ¦ã•ã‚Œã‚‹ğŸ’¡
    * é–‹ã„ã¦ã„ã‚‹ã¨å›è·¯ãŒåˆ‡æ–­ã•ã‚Œã¦ã„ã‚‹
      * Raspberry Pi Pico ã«é›»æºãŒä¾›çµ¦ã•ã‚Œãªã„â–ªï¸
  * ãƒ‡ãƒã‚¤ã‚¹é›»æºã® ON / OFF åˆ‡ã‚Šæ›¿ãˆã«ä½¿ç”¨

= æ¦‚è¦³å›³ 3. æŠµæŠ—
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pcb3.png
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= æ¦‚è¦³å›³ 3. æŠµæŠ—

  * é›»æºã‹ã‚‰ãƒ‘ãƒ¼ãƒ„ã‚„ãƒã‚¤ã‚³ãƒ³ã«æµã™é›»æµã‚’åˆ¶é™ã™ã‚‹
    * é›»æµãŒå¤§ãã™ãã‚‹ã¨ãƒ‘ãƒ¼ãƒ„ãªã©ã‚’ç ´å£Šã™ã‚‹ ğŸ™…â€â™€ï¸
  * ãƒ‘ãƒ¼ãƒ„ã«ã¯å®šæ ¼é›»æµãŒã‚ã‚‹
    * æŠµæŠ—ã‚’åˆ©ç”¨ã—ã¦é©åˆ‡ãªé›»æµã‚’æµã™ ğŸ™†â€â™‚ï¸
  * å®šæ ¼é›»æµã¯ãƒ‘ãƒ¼ãƒ„ã®ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã«è¨˜è¼‰ãŒã‚ã‚‹

  # image
  # src = image/fukidashi-resistor.png
  # relative_width = 32
  # align = right
  # vertical_align = bottom
  # relative_margin_top = 8
  # relative_margin_left = 4

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/makicamel.png
: background-image-relative-width
   8
: background-image-align
   right
: background-image-vertical-align
   bottom
: background-image-relative-margin-right
   4

= æ¦‚è¦³å›³ 3. æŠµæŠ—

  * æŠµæŠ—å€¤ã¯((*ã‚ªãƒ¼ãƒ ã®æ³•å‰‡*))ã§æ±‚ã‚ã‚‹
    * V = IR
    * é›»åœ§(V) = é›»æµ(A) * æŠµæŠ—(Î©)
      * e.g. é›»æºé›»åœ§ãŒ3Vã€æµã—ãŸã„é›»æµãŒ30mAã€ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã®æŠµæŠ—ãŒ 15Î©
        * ãƒ» 3V = 0.03A * (R + 15) Î©
        * ãƒ» R = 3 / 0.03 - 15\nã€€=> 85Î©
        * ãƒ» 85Î©ã®æŠµæŠ—ãŒå¿…è¦\nâ†’ 100Î©ã®æŠµæŠ—ã‚’ä½¿ã†

= æ¦‚è¦³å›³ 3. æŠµæŠ—

  * æŠµæŠ—ã®æŠµæŠ—å€¤ã¯ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‹ã‚‰èª­ã¿å–ã‚‹
    * ref. æŠµæŠ—ã®ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è¨ˆç®—æ©Ÿ ((<URL:https://akizukidenshi.com/catalog/pages/reg-calc.aspx>))
    * åˆ¤åˆ¥ã‚€ãšã™ãå•é¡Œ
      * èµ¤ã¨èŒ¶ã€é’ã¨é»’...
  * ãƒ†ã‚¹ã‚¿ãƒ¼ã§ã‚‚ç¢ºèªå¯

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/resistor.png
: background-image-relative-height
   68
: background-image-align
   right
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   30

= æ¦‚è¦³å›³ 4. Raspberry Pi Pico
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pcb4.png
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= æ¦‚è¦³å›³ 4. Raspberry Pi Pico

  * æ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚Šé›»æ°—ä¿¡å·ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹
  * PicoRuby ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ãã‚‹ğŸ’

= æ¦‚è¦³å›³ 4. Raspberry Pi Pico

Raspberry Pi Pico

  * ãƒã‚¤ã‚³ãƒ³ãƒœãƒ¼ãƒ‰
    * RP2040 æ­è¼‰
    * USB ã§é›»æºä¾›çµ¦ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ›¸ãè¾¼ã¿å¯
\n\n\n\n
(('tag:xx-small:ã€€Raspberry Pi Picoã€€'))((<URL:https://www.raspberrypi.com/products/raspberry-pi-pico/>))

= æ¦‚è¦³å›³ 4. Raspberry Pi Pico

Raspberry Pi Pico

  * ãƒã‚¤ã‚³ãƒ³ãƒœãƒ¼ãƒ‰
    * RP2040 æ­è¼‰
    * USB ã§é›»æºä¾›çµ¦ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ›¸ãè¾¼ã¿å¯
  * RP2040
    * ãƒã‚¤ã‚³ãƒ³ãƒãƒƒãƒ—

\n
(('tag:xx-small:ã€€Raspberry Pi Picoã€€'))((<URL:https://www.raspberrypi.com/products/raspberry-pi-pico/>))

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/raspberrypipico.png
: background-image-relative-width
   50
: background-image-align
   right
: background-image-vertical-align
   bottom
: background-image-relative-margin-left
   -8
: background-image-relative-margin-top
   -18

= æ¦‚è¦³å›³ 4. RP2040ï¼ˆRaspberry Pi Picoï¼‰

  * 7ãŸ ã« CPUãƒ»ãƒ¡ãƒ¢ãƒªãƒ»ãƒšãƒªãƒ•ã‚§ãƒ©ãƒ«ãªã©ãŒã¤ã¾ã£ã¦ã„ã‚‹
  * ãƒšãƒªãƒ•ã‚§ãƒ©ãƒ«: æ©Ÿèƒ½å°‚ç”¨ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢
    * ãƒ‡ã‚¸ã‚¿ãƒ« I/O
    * PWM
    * é€šä¿¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
    * etc

(('tag:xx-small:ã€€RP2040ã€€'))((<URL:https://www.raspberrypi.com/products/rp2040/>))

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/rp2040.png
: background-image-relative-height
   72
: background-image-align
   right
: background-image-vertical-align
   middle
: background-image-relative-margin-left
   8
: background-image-relative-margin-top
   28

= æ¦‚è¦³å›³ 4. RP2040ï¼ˆRaspberry Pi Picoï¼‰

  * PWM ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
    * Pulse Width Modulation
    * ä¸€å®šã®å‘¨æ³¢æ•°ãƒ»é›»åœ§ High ã®æ¯”ç‡ã§\nä¿¡å·ã‚’ç”Ÿæˆã™ã‚‹
      * e.g. ãƒ¢ãƒ¼ã‚¿ãƒ¼åˆ¶å¾¡
        * - å¹³å‡é›»åœ§ã‚’å¤‰ãˆã¦å›è»¢æ•°ã‚’åˆ¶å¾¡
      * e.g. èµ¤å¤–ç·šãƒªãƒ¢ã‚³ãƒ³
        * - èµ¤å¤–ç·šä¿¡å·ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®š

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pwm.png
: background-image-relative-width
   40
: background-image-align
   right
: background-image-vertical-align
   middle
: background-image-relative-margin-left
   -6

= æ¦‚è¦³å›³ 4. RP2040ï¼ˆRaspberry Pi Picoï¼‰

* PWM ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  * PicoRuby ã§æ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ ğŸŒŠ

      # rouge ruby
      # PWMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§0.5ç§’ãšã¤ãƒ‰,ãƒ¬,ãƒŸã®æ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹
      require 'pwm'
      pwm = PWM.new(0, duty: 50)
      [262, 294, 330].each do |frequency| # ãƒ‰,ãƒ¬,ãƒŸã®å‘¨æ³¢æ•°
            pwm.frequency(frequency)
            t = Time.now
            while (Time.now - t) < 0.5; end # 0.5ç§’ãƒ“ã‚¸ãƒ¼ãƒ«ãƒ¼ãƒ—ã•ã›ã‚‹
      end

= æ¦‚è¦³å›³ 5. ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼
ã€€
== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/pcb5.png
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= æ¦‚è¦³å›³ 5. ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼

  * éŸ³å£°å‡ºåŠ›è£…ç½®
  * PWM ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ç”Ÿæˆã—ãŸæ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã‚’é›»æ°—ä¿¡å·ã¨ã—ã¦å…¥åŠ›ã™ã‚‹

= æ¦‚è¦³å›³

å®Œæˆ ğŸ”ˆ

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/first-mile.jpg
: background-image-relative-height
   88
: background-image-align
   center
: background-image-vertical-align
   middle
: background-image-relative-margin-top
   4

= ç›®æ¬¡

  (1) æ¦‚è¦³ã‚’çœºã‚ã‚‹
  (2) ((*PicoRuby ã®ã‚ãã³æ–¹*))
  (3) åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

= PicoRuby ã®ã‚ãã³æ–¹

  * 1. Raspberry Pi Pico ã‚’ USB ã§ãƒ‘ã‚½ã‚³ãƒ³ã¨ã¤ãªã
  * 2. R2P2((-PicoRuby ç”¨ã‚·ã‚§ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€€((<URL:https://github.com/picoruby/R2P2>))-))ã‚’ Raspberry Pi Pico ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    * æœ€æ–°ãƒªãƒªãƒ¼ã‚¹ã‹ã‚‰ uf2 ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãƒ‰ãƒ©ãƒƒã‚° & ãƒ‰ãƒ­ãƒƒãƒ—ã§å®Œäº†
  * 3. ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§æ¥ç¶š
    * mac ã ã¨ `TERM=vt100 screen /dev/tty.usbmodem*`
  * 4. ã‚·ã‚§ãƒ«èµ·å‹•

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/picoruby-shell.png
: background-image-relative-height
   60
: background-image-align
   center
: background-image-vertical-align
   bottom
: background-image-relative-margin-left
   40
: background-image-relative-margin-top
   40

= PicoRuby ã®ã‚ãã³æ–¹

  * irb
    * `puts 'Hello, PicoRuby!'`
  * /home/app.rb
    * ã“ã®ãƒ‘ã‚¹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã¨ Raspberry Pi Pico èµ·å‹•æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹
  * ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ((<URL:https://picoruby.github.io/>))

= PicoRuby ã®ã‚ãã³æ–¹

  * irb ã§éŠã‚“ã§ã„ã‚‹ã¨ Out of Memory ã«é­é‡ã—ã‚„ã™ã„
    * Raspberry Pi Pico ã®ãƒ¡ãƒ¢ãƒªã¯ 256KB
      * ref MacBook Pro (M3 Pro) ã®ãƒ¡ãƒ¢ãƒªã¯ 32GB
      * 1 / 125000
    * å¤§ããªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆã¯é¿ã‘ãŸã»ã†ãŒã‚ˆã„

= PicoRuby ã®ã‚ãã³æ–¹

  * Road to RubyKaigi ã® BGM
    * å…ƒå®Ÿè£…ã¯é…åˆ—ã‚’ value ã¨ã—ãŸãƒãƒƒã‚·ãƒ¥ã®é…åˆ—
    * ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ 1 éŸ³ã€ãƒ™ãƒ¼ã‚¹ 2 éŸ³
    * ã“ã®ã¾ã¾ã ã¨ãƒ¡ãƒ¢ãƒªè¶³ã‚Šãªã„ã‹ã‚‚

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/melody-sequencer.png
: background-image-relative-width
   60
: background-image-align
   center
: background-image-vertical-align
   top
: background-image-relative-margin-top
   56

= PicoRuby ã®ã‚ãã³æ–¹: ãƒ‡ãƒ¼ã‚¿åœ§ç¸®

  * ä½¿ç”¨ã™ã‚‹éŸ³ç¨‹ã¯ 2 ã‚ªã‚¯ã‚¿ãƒ¼ãƒ– 14 éŸ³ + ä¼‘ç¬¦ã® 15 éŸ³
    * 2^4 => 16 ãªã®ã§ 1 éŸ³ã‚’ 4bitï¼ˆ16 é€²æ•° 1 æ–‡å­—ï¼‰ã§è¡¨ã—ã¦ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã™ã‚‹
  * éŸ³ç¨‹ã«ç•ªå·ã‚’å‰²ã‚Šå½“ã¦ 16 é€²æ•°ã§è¡¨ã™
    * e.g. E4 â†’ 2ï¼ˆ10 é€²æ•°ï¼‰ â†’ 0x2ï¼ˆ16 é€²æ•°ï¼‰

        # rouge ruby
          NOTE_MAPPING = {
            C4: 0, D4: 1, E4: 2, F4: 3, A4: 5, B4: 6, REST: 4, # ...
          }

= PicoRuby ã®ã‚ãã³æ–¹: ãƒ‡ãƒ¼ã‚¿åœ§ç¸®

  * éŸ³éšã‚’ 16 é€²æ•°ã®é…åˆ—ã«å¤‰æ›
    * e.g. [C4, D4, E4] â†’ [0x0, 0x1, 0x2]
  * å·¦ã‚·ãƒ•ãƒˆã—ã¦ã²ã¨ã¤ã® Integer ã«ã™ã‚‹
    * e.g. [0x0, 0x1, 0x2] â†’ 0x210ï¼ˆ16 é€²æ•°ï¼‰ â†’ 528ï¼ˆ10 é€²æ•°ï¼‰
  * å°ã•ããªã£ãŸï¼

= PicoRuby ã®ã‚ãã³æ–¹: ãƒ‡ãƒ¼ã‚¿åœ§ç¸®

  * éŸ³ã®é•·ã•ã‚‚åŒæ§˜ã«åœ§ç¸®
    * åå…­éƒ¨éŸ³ç¬¦: 0, å…«åˆ†éŸ³ç¬¦: 1, å››åˆ†éŸ³ç¬¦: 2
  * ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸ Integer ã‚’ã‚³ãƒ¼ãƒ‰ã«åŸ‹ã‚è¾¼ã¿

      # rouge ruby
        SCORES = [
            { notes: [45589323163098, 120693318330058, ...] }, # ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼
            { notes: [72588760057059, 72588760057059,  ...] }, # ãƒ™ãƒ¼ã‚¹ 1
            { notes: [85991239857509, 85991239857509, ...] }, # ãƒ™ãƒ¼ã‚¹ 2
        ]

= PicoRuby ã®ã‚ãã³æ–¹: ãƒ‡ãƒ¼ã‚¿åœ§ç¸®

  * å†ç”Ÿæ™‚ã«ãƒ‡ã‚³ãƒ¼ãƒ‰

      # rouge ruby
        DECODER = Proc.new do |packed, shift|
            # éŸ³ç¨‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨éŸ³ã®é•·ã•ã‚’ã‚»ãƒƒãƒˆã§å–ã‚Šå‡ºã™
            index_duration = (packed >> (shift * NOTE_BITS)) & 0b111111 # ãƒ‡ã‚³ãƒ¼ãƒ‰æ™‚ã¯å³ã‚·ãƒ•ãƒˆ
            [
                NOTE_MAPPING[index_duration & 0b1111], # éŸ³ç¨‹ã®ç•ªå·
                0.25 * 2 ** ((index_duration >> FREQUENCY_BITS) & 0b11) # éŸ³ã®é•·ã•
            ]
        end

  * ç„¡äº‹éŸ³ãŒé³´ã£ãŸ ğŸ”ˆ

(('tag:xx-small:ã€€ã€€'))((<URL:https://github.com/makicamel/picoruby-phrase/blob/main/player.rb>))


= ç›®æ¬¡

  (1) æ¦‚è¦³ã‚’çœºã‚ã‚‹
  (2) PicoRuby ã®ã‚ãã³æ–¹
  (3) ((*åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š*))

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * å‹¢ã„ã‚ˆãé€²ã‚€ã‚¿ã‚¤ãƒ—ã®è©±è€…ãŒå‹¢ã„ã‚ˆããƒãƒã£ã¦ããŸã“ã¨ã¨ãã®ãµã‚Šã‹ãˆã‚Š

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * ã¯ã‚“ã ã¥ã‘ãŒä¸‹æ‰‹ ğŸ˜
    * æ­£ã—ã„å›è·¯ã®ã¯ãšãªã®ã«é›»åœ§ãŒä½ã„
    * ã¯ã‚“ã ãŒæº¶ã‘ãªã„ãƒ»ã¤ã‹ãªã„
    * ã‚„ã‚Šç›´ã—ã™ãã¦ãƒ©ãƒ³ãƒ‰ãŒæº¶ã‘ã¦é›»å°ä½“ãŒç„¡
  * YouTube ã¹ã‚“ã‚Š ğŸ˜€
    * How To Solder Electronic Component. Tutorial((-((<URL:https://www.youtube.com/watch?v=dQ7AUjb1tkA&t=1323s>))-)) ã¯ã¨ãã«ãŠå‹§ã‚
    * è‡ªåˆ†ã®ã¯ã‚“ã ã¥ã‘ãŒã†ã¾ãã„ã‹ãªã„ç†ç”±ãƒ»å¯¾å‡¦æ³•ãŒã‚ã‹ã‚‹

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/ng-solder.jpg
: background-image-relative-width
   20
: background-image-align
   right
: background-image-vertical-align
   top
: background-image-relative-margin-top
   4
: background-image-relative-margin-right
   24

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * ã¯ã‚“ã ã¥ã‘ãŒä¸‹æ‰‹ ğŸ˜
  * ä¸¡é¢ã‚¹ãƒ«ãƒ¼ãƒ›ãƒ¼ãƒ«åŸºç›¤ã‚’ä½¿ã† ğŸ˜€
    * ç‰‡é¢ãƒãƒ³ã‚¹ãƒ«ãƒ¼ãƒ›ãƒ¼ãƒ«åŸºç›¤ã¯éåˆå¿ƒè€…å‘ã‘
  * ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’ä½¿ã† ğŸ˜€
    * ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®ã‚ˆã†ã«ç¸¦æ¨ªã«ãƒ©ãƒ³ãƒ‰ãŒç¹‹ãŒã£ã¦ã„ã‚‹
    * ã¯ã‚“ã ã¥ã‘è² æ‹…ãŒæ¸›ã‚‹

== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

: background-image
   image/bbpcb.jpg
: background-image-relative-width
   28
: background-image-align
   center
: background-image-vertical-align
   top
: background-image-relative-margin-top
   64
: background-image-relative-margin-left
   20

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * é…ç·šãŒä¸‹æ‰‹ ğŸ˜
    * ã‚ˆãã‚ã‹ã‚‰ãªã„ã‘ã©ã”ã¡ã‚ƒã¤ã„ã¦ã„ã‚‹
    * ã©ã†æ•´ç†ã—ãŸã‚‰ã‚ˆã„ã‹ã‚ã‹ã‚‰ãªã„
  * å¯¾ç­– ğŸ˜€
    * é›»æºç”¨é…ç·šã¯é›»æºå°‚ç”¨ã«ã—ã¦ä»–ã®ç”¨é€”ã¨æ··ãœãªã„
    * é›»æºã€ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã€ãã‚Œä»¥å¤–ã®è‰²ã‚’æ±ºã‚ã‚‹
    * é…ç·šã¯çŸ­ã„ã»ã†ãŒã„ã„
    * ãƒ‘ãƒ¼ãƒ„ã®ä¸‹ã‚’ããã‚‰ã›ã‚‹ã¨ãƒ¡ãƒ³ãƒ†ã—ã¥ã‚‰ã„ã®ã§é¿ã‘ã‚‹

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * å›è·¯ã®ãƒ‡ãƒãƒƒã‚°ãŒã§ããªã„ ğŸ˜
    * æ„å›³é€šã‚Šå‹•ã‹ãªã„æ™‚ã«ã©ã†èª¿æŸ»ã—ãŸã‚‰ã‚ˆã„ã‹ã‚ã‹ã‚‰ãªã„
  * ä½•ã¯ã¨ã‚‚ã‚ã‚Œãƒ†ã‚¹ã‚¿ãƒ¼ã§ç¢ºèª ğŸ˜€
    * æ„å›³é€šã‚Šã®é›»åœ§ãŒãã¦ã„ã‚‹ã‹ï¼Ÿ
      * é…ç·šãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã‚‚
      * ã¯ã‚“ã ã¥ã‘ãŒã†ã¾ãã§ãã¦ã„ãªã„ã‹ã‚‚
      * é›»æ± ãŒã¸ãŸã£ã¦ã„ã‚‹ã‹ã‚‚
    * æ„å›³é€šã‚Šã«å°é€šã—ã¦ã„ã‚‹ã‹ï¼Ÿ
      * PWM ã¯é›»åœ§ãŒå¤‰åŒ–ã™ã‚‹ã®ã§é›»åœ§ã§ã¯ãªãå°é€šãƒã‚§ãƒƒã‚¯ã™ã‚‹

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * å›è·¯ã®ãƒ‡ãƒãƒƒã‚°ãŒã§ããªã„ ğŸ˜
  * å¤§ããªæ•…éšœç®‡æ‰€ã‹ã‚‰ç¯„å›²ã‚’ç‹­ã‚ã¦å•é¡Œç®‡æ‰€ã‚’æ¢ã‚‹ ğŸ˜€
    * ãƒ—ãƒªãƒ³ãƒˆãƒ‡ãƒãƒƒã‚°ã¨ä¸€ç·’

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * ã¨ã‚Šã‚ãˆãšå…¨éƒ¨é…ç·šã—ãŸã‘ã©ã†ã¾ãå‹•ã‹ãªã„ ğŸ˜
    * ã©ã“ã«åŸå› ãŒã‚ã‚‹ã‹ã•ã£ã±ã‚Šã‚ã‹ã‚‰ãªã„
  * ã¨ã‚Šã‚ãˆãšå…¨éƒ¨é…ç·šã—ãªã„ ğŸ˜„
    * 1 ã‚¹ãƒ†ãƒƒãƒ—ãšã¤ç¢ºã‹ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
      * ä¿¡é ¼ã®ãŠã‘ã‚‹ã‚‚ã®ã‚’ç©ã¿ä¸Šã’ã‚‹
      * ãƒ‘ãƒ¼ãƒ„ãŒå£Šã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹
    * ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§å˜ä½“ãƒ†ã‚¹ãƒˆã™ã‚‹ã®ã¨åŒã˜

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆãŒèª­ã‚ãªã„ ğŸ˜
    * å¸¸ç”¨å˜èªãŒã‚ã‹ã‚‰ãªã„
    * èª­ã¿æ–¹ãŒã‚ã‹ã‚‰ãªã„
    * ä½•ãŒæ›¸ã„ã¦ã‚ã‚‹ã‹ã‚ã‹ã‚‰ãªã„
  * æ¬²ã—ã„æƒ…å ±ã‚’æ˜ç¢ºã«ã—ã¦ã‹ã‚‰è‡¨ã‚€ã¨ã‚ˆã•ãã† ğŸ˜€
    * å®šæ ¼é›»æµ
    * ãƒ”ãƒ³ç•ªå·
    * etc

= åˆå¿ƒè€…ã®ãµã‚Šã‹ãˆã‚Š

  * ãƒ‘ãƒ¼ãƒ„ã‚·ãƒ§ãƒƒãƒ—ã«ä½•ã‚‚èª¿ã¹ãšè¡Œã ğŸ˜
    * ãˆã£ã€ãƒ‘ãƒ¼ãƒ„ã®ç¨®é¡ã€å¤šã™ã...ï¼Ÿ
    * é¸ã³æ–¹ãŒã‚ã‹ã‚‰ãªã„
  * æ¬²ã—ã„éƒ¨å“ã‚’äº‹å‰ã«èª¿ã¹ã‚‹ ğŸ˜€
    * å•†å“ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¨ã‚¹ãƒ ãƒ¼ã‚º
    * è¦‹ã¦ã„ã‚‹ã ã‘ã§ã‚‚æ¥½ã—ã„ã®ã¯æ¥½ã—ã„
    * è©³ã—ã„äººã¨è¡Œãã¨ç™ºè¦‹ãŒãŸãã•ã‚“ã‚ã£ã¦æ¥½ã—ã„
      * æ˜æ—¥7æœˆ20æ—¥ã«ã‚¢ãƒ•ã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚Šã¾ã™

= åˆå¿ƒè€…ãŒãƒãƒã‚‰ãªã‹ã£ãŸç©´

  * (('del:èãäººãŒã„ãªã„'))
  * æ¯æ—¥ @youchan ã«ç›¸è«‡ã—ã¦ã„ãŸ ğŸ¥°
    * ãƒã‚¤ã‚³ãƒ³ãƒœãƒ¼ãƒ‰ã®è£è¡¨ã‹ã‚‰ãƒ‡ãƒãƒƒã‚°ã®ä»•æ–¹ã€é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¾ã§
    * ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã¯ç‰¹ã«ç›¸è«‡ã§ãã‚‹äººãŒã„ãŸã»ã†ãŒã„ã„
    * ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
      * naniwa.rbï¼ˆå¤§é˜ªï¼‰ã€€((<URL:https://naniwarb.doorkeeper.jp/>))
      * PicoPicoRubyï¼ˆæ±äº¬ï¼‰ ((<URL:https://picopicoruby.connpass.com/>))
    * Twitter ã§ã¤ã¶ã‚„ãã¨æ‹¾ã£ã¦ãã‚Œã‚‹ã²ã¨ã‚‚ã„ã‚‹ã‹ã‚‚

= Special Thanks

  * @youchan

= Happy Hacking!
